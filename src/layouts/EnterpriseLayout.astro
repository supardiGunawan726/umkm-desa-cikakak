---
import type { IEnterprise } from "../schemas/enterprise";
import Layout from "./Layout.astro";

interface Props {
  enterprise: IEnterprise;
}

const { enterprise } = Astro.props;
const { bannerImg, name, owner, phoneNumber, category, mapEmbedUrl } = enterprise;
---

<Layout title={name}>
  <main class="container mx-auto lg:grid lg:gap-6 lg:grid-cols-[1fr_400px] lg:px-4 lg:py-6">
    <div class="grow-1 shrink-0 lg:bg-white lg:border lg:border-gray-200 lg:rounded-lg lg:overflow-hidden">
      <section class="p-4 relative">
        <img src={bannerImg} alt={name} class="absolute inset-0 w-full h-full object-cover">
        <div class="absolute inset-0 backdrop-blur-[2px] bg-black/40"></div>
        <div class="relative aspect-video flex flex-col items-center justify-center lg:aspect-auto lg:min-h-[300px]">
          <h1 class="text-center text-white font-semibold font-playfair-display text-2xl lg:text-4xl">{name}</h1>
        </div>
      </section>
      <section class="p-4 grid gap-2.5 lg:hidden">
        <div class="grid gap-1.5">
          <h2 class="text-lg font-medium">Kontak</h2>
          <p class="text-gray-500 font-light grid gap-0.5"><span>{owner}</span><span>{phoneNumber}</span></p>
        </div>
        <div class="grid gap-1.5">
          <h2 class="text-lg font-medium">Kategory</h2>
          <p class="text-gray-500 font-light">{category}</p>
        </div>
        <div class="grid gap-1.5">
          <h2 class="text-lg font-medium">Lokasi</h2>
          <iframe src="https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d837.3586261092272!2d106.50007656908645!3d-6.954517508279683!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e0!3m2!1sid!2sid!4v1724432436260!5m2!1sid!2sid" class="w-full max-w-[500px] aspect-video" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>
      </section>
      <div class="hidden lg:block lg:p-4">
        <slot/>
      </div>
    </div>
    <section class="hidden p-4 lg:grid gap-2.5 lg:p-0 lg:h-max lg:sticky lg:top-0 ">
      <div class="grid gap-1.5 lg:bg-white lg:border lg:border-gray-200 lg:rounded-lg lg:overflow-hidden lg:p-4">
        <h2 class="text-lg font-medium">Kontak</h2>
        <div class="text-gray-500 font-light grid gap-0.5">
          <p>{owner}</p>
          <div class="flex items-center gap-2">
            <p>{phoneNumber}</p>
            <a href={`https://wa.me/${phoneNumber}`} target="_blank" rel="noopener noreferrer" class="text-sm text-blue-500 hover:underline">Hubungi</a>
          </div>
        </div>
      </div>
      <div class="grid gap-1.5 lg:bg-white lg:border lg:border-gray-200 lg:rounded-lg lg:overflow-hidden lg:p-4">
        <h2 class="text-lg font-medium">Kategory</h2>
        <p class="text-gray-500 font-light">{category}</p>
      </div>
      <div class="grid gap-1.5 lg:bg-white lg:border lg:border-gray-200 lg:rounded-lg lg:overflow-hidden lg:p-4">
        <h2 class="text-lg font-medium">Lokasi</h2>
        <iframe src={mapEmbedUrl} class="w-full max-w-[500px] aspect-video" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
      </div>
    </section>
    <div class="px-4 lg:hidden">
      <slot/>
    </div>
  </main>
</Layout>